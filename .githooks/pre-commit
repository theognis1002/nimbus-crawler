#!/bin/sh
# Pre-commit hook: check formatting and run vet

set -e

# Check gofmt
UNFORMATTED=$(gofmt -l . 2>&1) || true
if [ -n "$UNFORMATTED" ]; then
    echo "The following files are not formatted with gofmt:"
    echo "$UNFORMATTED"
    echo ""
    echo "Run 'gofmt -w .' to fix."
    exit 1
fi

# Run go vet
go vet ./...
